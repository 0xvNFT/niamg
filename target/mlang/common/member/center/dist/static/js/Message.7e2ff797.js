(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Message"],{9321:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pageModule"},[a("el-pagination",{attrs:{"current-page":e.pageNumber,layout:"total, prev, pager, next, jumper",total:e.total,"hide-on-single-page":!0},on:{"current-change":e.handleCurrentChange}})],1)},s=[],c=(a("a28e"),{data:function(){return{}},props:{total:"",pageNumber:""},computed:{},components:{},created:function(){},methods:{handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.$emit("update:pageNumber",e),this.$emit("searchMethod")}},watch:{}}),i=c,r=(a("d3e0"),a("2877")),o=Object(r["a"])(i,n,s,!1,null,null,null);t["a"]=o.exports},"9d18":function(e,t,a){},c115:function(e,t,a){"use strict";var n=a("9d18"),s=a.n(n);s.a},ca75:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"message-page"},[a("el-checkbox",{model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}}),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.delBtn}},[e._v(e._s(e.$t("delete")))]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.allReceiveDelete}},[e._v(e._s(e.$t("allDelete")))]),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.allReceiveRead}},[e._v(e._s(e.$t("allRead")))]),a("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.data,(function(t,n){return a("el-collapse-item",{key:n,class:1==e.readArr[n]?"noRead":"",attrs:{name:t.id+"-"+t.receiveMessageId+"-"+t.status+"-"+n}},[a("template",{slot:"title"},[a("el-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"val.check"}}),e._v(" "+e._s(t.title)+" ")],1),a("div",{domProps:{innerHTML:e._s(t.content)}})],2)})),1),a("PageModule",{attrs:{total:e.total,pageNumber:e.pageNumber},on:{"update:pageNumber":function(t){e.pageNumber=t},"update:page-number":function(t){e.pageNumber=t},searchMethod:e.searchMethod}})],1)},s=[],c=a("9321"),i={data:function(){return{activeName:"",data:[],total:0,pageNumber:1,rids:"",allChecked:!1,readArr:[]}},computed:{},components:{PageModule:c["a"]},mounted:function(){this.searchMethod([!0,200,null])},methods:{searchMethod:function(e){var t=this,a=new URLSearchParams;a.append("pageNumber",this.pageNumber),this.$axiosPack.post("/userCenter/msgManage/messageList.do",{params:a,load:e}).then((function(a){if(a){if(t.readArr=[],e)for(var n=0;n<a.data.rows.length;n++)a.data.rows[n].check=!1,t.readArr.push(a.data.rows[n].status);t.data=a.data.rows,t.total=a.data.total}}))},delBtn:function(){var e=this;this.$confirm(this.$t("sureDelete"),this.$t("hintText"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){for(var t="",a=0;a<e.data.length;a++)e.data[a].check&&(t+=e.data[a].receiveMessageId+",");var n=new URLSearchParams;n.append("ids",t),e.$axiosPack.post(" /userCenter/msgManage/receiveDelete.do",{params:n,load:[!0,200,null]}).then((function(t){t&&t.data.msg&&(e.allChecked=!1,e.$notify({title:"success",message:t.data.msg,type:"success"}),e.searchMethod(!1))}))})).catch((function(){}))},allReceiveDelete:function(){var e=this;this.$confirm(this.$t("sureAllDelete"),this.$t("hintText"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){e.$axiosPack.post("/userCenter/msgManage/allReceiveDelete.do",{load:[!0,200,null]}).then((function(t){t&&t.data.msg&&e.$notify({title:"success",message:t.data.msg,type:"success"})}))})).catch((function(){}))},allReceiveRead:function(){var e=this;this.$confirm(this.$t("sureAllRead"),this.$t("hintText"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){e.$axiosPack.post("/userCenter/msgManage/allReceiveRead.do",{load:[!0,200,null]}).then((function(t){t&&t.data.msg&&(e.$notify({title:"success",message:t.data.msg,type:"success"}),e.searchMethod(!1))}))})).catch((function(){}))}},watch:{activeName:function(){var e=this,t=this.activeName.split("-");if(1==t[2]){var a=new URLSearchParams;a.append("sid",t[0]),a.append("rid",t[1]),this.$axiosPack.post("/userCenter/msgManage/readMessage.do",{params:a}).then((function(a){a&&(e.readArr[t[3]]=2,e.$forceUpdate())}))}},allChecked:function(){for(var e=0;e<this.data.length;e++)this.data[e].check=this.allChecked}}},r=i,o=(a("c115"),a("2877")),l=Object(o["a"])(r,n,s,!1,null,null,null);t["default"]=l.exports},d3e0:function(e,t,a){"use strict";var n=a("ebf9"),s=a.n(n);s.a},ebf9:function(e,t,a){}}]);