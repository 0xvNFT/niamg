System.register("chunks:///_virtual/AHotUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,a,s,i,l,r,n,o,c,h,d,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,s=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,n=e.Asset,o=e.Label,c=e.ProgressBar,h=e.sys,d=e.native,g=e.game,p=e.Component}],execute:function(){var u,f,v,_,b,m,E,A,k;l._RF.push({},"44290HWLBRP3ZFZ4mZQ4Gnq","AHotUpdate",void 0);var C=r.ccclass,M=r.property,U=window.jsb;e("HotUpdate",(u=C("HotUpdate"),f=M(n),v=M(o),_=M(c),u((E=t((m=function(e){function t(){for(var t,a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,s(t,"manifestUrl",E,i(t)),s(t,"tip",A,i(t)),s(t,"loadingBar",k,i(t)),t._updating=!1,t._am=null,t._storagePath="",t.versionCompareHandle=null,t.updateCallback=void 0,t.errCallback=void 0,t.updateDialog=!1,t.newVersion="",t}a(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;U&&(this._storagePath=(U.fileUtils?U.fileUtils.getWritablePath():"/")+"a7update",console.log("Storage path for remote asset : "+this._storagePath),this.versionCompareHandle=function(t,a){console.log("JS Custom Version Compare: version A is "+t+", version B is "+a),e.newVersion=a;for(var s=t.split("."),i=a.split("."),l=0;l<s.length;++l){var r=parseInt(s[l]),n=parseInt(i[l]||"0");if(r!==n)return r-n}return i.length>s.length?-1:0},this._am=new U.AssetsManager(this.manifestUrl.nativeUrl,this._storagePath,this.versionCompareHandle),this._am.setVerifyCallback((function(e,t){var a=t.compressed,s=t.md5,i=t.path;t.size;return a?(console.log("verification passed : ",i),!0):(console.log("Verification passed : "+i+" ("+s+")"),!0)})))},l.startCheckUpdate=function(e,t,a){return void 0===a&&(a=!1),this.updateCallback=e,this.errCallback=t,this.updateDialog=a,this.checkUpdate()},l.checkUpdate=function(){if(this._updating||!h.isNative)return console.log("Checking or updating ..."),!1;if(this._am.getState()===U.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;console.log("nativeUrl",e),this._am.loadLocalManifest(e)}if(this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded())return this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),!0;console.log("Failed to load local manifest ...")},l.checkCb=function(e){var t=this;switch(console.log("Code: "+e.getEventCode()),e.getEventCode()){case U.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.errCallback&&this.errCallback("No local manifest file found, hot update skipped");break;case U.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case U.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("hotupdate: Fail to download manifest file, hot update skipped."),this.errCallback&&this.errCallback("Fail to download manifest file, hot update skipped.");break;case U.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("hotupdate: Already up to date with the latest remote version."),this.updateCallback&&this.updateCallback("Already up to date with the latest remote version.");break;case U.EventAssetsManager.NEW_VERSION_FOUND:var a=Math.ceil(this._am.getTotalBytes()/1024);if(console.log("hotupdate: new version found totalKB = ",a),0==a)return;this.scheduleOnce((function(){t.hotUpdate()}),.5);break;default:return}this._am.setEventCallback(null),this._updating=!1},l.hotUpdate=function(){if(this._am&&!this._updating){if(console.log("start hotUpdate ----"),this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===U.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}this._am.update(),this._updating=!0}},l.updateCb=function(e){var t=!1;switch(console.log("event code = ",e.getEventCode()),e.getEventCode()){case d.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:t=!0,this.updateDialog?this.tip.string="No local manifest file found":this.errCallback&&this.errCallback("No local manifest file found");break;case d.EventAssetsManager.UPDATE_PROGRESSION:e.getPercent()&&(console.log("download precent = ",e.getPercent()),this.updateDialog?this.tip.string="update..."+e.getPercent():(this.tip.string="update...",this.loadingBar.progress=e.getPercent()));break;case d.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case d.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download patch file, hot update skipped."),t=!0,this.updateDialog?this.tip.string="Fail to download patch file":this.errCallback&&this.errCallback("Fail to download patch file");break;case d.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),t=!0,this.updateCallback&&this.updateCallback("Already up to date with the latest remote version.");break;case d.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished. "+e.getMessage()),this.updateDialog&&(this.tip.string="Update finished. "+e.getMessage()),this.restartGame(!0);break;case d.EventAssetsManager.UPDATE_FAILED:var a;if(console.log("Update failed. "+e.getMessage()),this._updating=!1,this.updateDialog)this.tip.string="Update failed. "+e.getMessage();else if(this.errCallback)this.errCallback(null!=(a=e.getMessage())?a:"Update failed");break;case d.EventAssetsManager.ERROR_UPDATING:var s;if(console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage()),this.updateDialog)this.tip.string="Asset update error: "+e.getAssetId()+", "+e.getMessage();else if(this.errCallback)this.errCallback(null!=(s=e.getMessage())?s:"Update failed");break;case d.EventAssetsManager.ERROR_DECOMPRESS:var i;if(console.log("error decompress error = ",e.getMessage()),this.updateDialog)this.tip.string="error decompress error = ",e.getMessage();else if(this.errCallback)this.errCallback(null!=(i=e.getMessage())?i:"Update failed")}t&&(this._am.setEventCallback(null),this._updating=!1)},l.restartGame=function(e){if(void 0===e&&(e=!0),e){this._updating=!1,this._am.setEventCallback(null);var t=U.fileUtils.getSearchPaths(),a=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(a)),Array.prototype.unshift.apply(t,a),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),U.fileUtils.setSearchPaths(t),setTimeout((function(){g.restart()}),1e3)}},l.onDestroy=function(){this._am&&this._am.setEventCallback(null),this.updateCallback=null,this.newVersion=""},t}(p)).prototype,"manifestUrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(m.prototype,"tip",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(m.prototype,"loadingBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=m))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(t){"use strict";var n,o,i,e,c,r,a,l,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Node,c=t.Label,r=t.UIOpacity,a=t.Component},function(t){l=t.default,s=t.PieceColor}],execute:function(){var h;o._RF.push({},"13990M3vm5K2KBjA1EzCIt/","Board",void 0);var u=i.ccclass;i.property,t("default",u(h=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).myColor=s.None,n.row=0,n.col=0,n.gameMain=null,n.canClick=!1,n}n(o,t);var i=o.prototype;return i.start=function(){this.node.on(e.EventType.TOUCH_START,this.onClick,this)},i.initData=function(t,n,o,i){this.myColor=o,this.gameMain=i,this.row=t,this.col=n,this.canClick=!1},i.showCanFlipCount=function(t){t>0?(this.node.children[0].children[0].getComponent(c).string=t.toString(),this.node.children[0].getComponent(r).opacity=255,this.canClick=!0):(this.node.children[0].getComponent(r).opacity=0,this.canClick=!1)},i.onClick=function(){l.currTurn!=s.Black||l.gameOver||this.myColor==s.None&&this.canClick&&this.gameMain.handlePieceClick(this.row,this.col)},o}(a))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/Chess.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(e){"use strict";var r,t,o,i,n,c,s,a,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,s=e.SpriteFrame,a=e.Sprite,l=e.Component},function(e){p=e.PieceColor}],execute:function(){var u,f,h,m;n._RF.push({},"f07fc6/RjJCBYlNg0OzAHMO","Chess",void 0);var y=c.ccclass,C=c.property;e("default",(u=C(s),y((m=r((h=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return r=e.call.apply(e,[this].concat(n))||this,o(r,"colorSpriteFrame",m,i(r)),r.myColor=p.None,r.row=0,r.col=0,r}return t(r,e),r.prototype.initData=function(e,r,t){this.myColor=t,this.node.getComponent(a).spriteFrame=this.colorSpriteFrame[t],this.row=e,this.col=r},r}(l)).prototype,"colorSpriteFrame",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChessBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Chess.ts","./Global.ts","./Board.ts"],(function(e){"use strict";var t,i,r,a,n,o,s,l,h,u,c,f,d,b,m,p,g,v,y,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.Prefab,l=e.Node,h=e.Label,u=e.UIOpacity,c=e.instantiate,f=e.tween,d=e.Vec3,b=e.v2,m=e.log,p=e.Component},function(e){g=e.default},function(e){v=e.default,y=e.PieceColor},function(e){C=e.default}],execute:function(){var w,D,T,P,B,N,k,z,I,F,A,M,W,x,O,V,G,L,S,R,_,E,H,j,K,Q,U,q,J,X,Y,Z,$,ee,te,ie;n._RF.push({},"b5d7536LiFOBbFQEI5xcuFv","ChessBoard",void 0);var re=o.ccclass,ae=o.property;e("default",(w=ae(s),D=ae(s),T=ae(s),P=ae(l),B=ae(l),N=ae(l),k=ae(l),z=ae(l),I=ae(h),F=ae(h),A=ae(h),M=ae(h),W=ae(h),x=ae(h),O=ae(h),V=ae(h),G=ae(h),re((R=t((S=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"piecePrefab",R,a(t)),r(t,"whiteItem",_,a(t)),r(t,"blackItem",E,a(t)),r(t,"board",H,a(t)),r(t,"left",j,a(t)),r(t,"right",K,a(t)),r(t,"startNode",Q,a(t)),r(t,"endNode",U,a(t)),r(t,"mytime",q,a(t)),r(t,"aitime",J,a(t)),r(t,"myChess",X,a(t)),r(t,"aiChess",Y,a(t)),r(t,"mytime2",Z,a(t)),r(t,"aitime2",$,a(t)),r(t,"myChess2",ee,a(t)),r(t,"aiChess2",te,a(t)),r(t,"message",ie,a(t)),t.boardData=[],t.buttons=[],t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.startNode.active=!0},n.onStartGame=function(){this.startNode.active=!1,this.initData(),this.initializeBoard(),this.updateButtons(),this.timingBegins(),this.updateChessNum()},n.goBack=function(){this.unscheduleAllCallbacks(),this.startNode.active=!0,this.initData()},n.initData=function(){v.clearData(),this.clearBoard(),this.endNode.active=!1,this.mytime.string=v.formatTime(v.MyTime),this.aitime.string=v.formatTime(v.AITime),this.left.removeAllChildren(),this.right.removeAllChildren()},n.clearBoard=function(){this.boardData=[],this.buttons=[];for(var e=0;e<8;e++)for(var t=0;t<8;t++)this.board.children[e].children[t].children[0].getComponent(u).opacity=0,this.board.children[e].children[t].children[1]&&this.board.children[e].children[t].children[1].removeFromParent()},n.timingBegins=function(){var e=this;this.schedule((function(){v.currTurn==y.Black?(v.MyTime+=1,e.mytime.string=v.formatTime(v.MyTime)):v.currTurn==y.White&&(v.AITime+=1,e.aitime.string=v.formatTime(v.AITime))}),1)},n.initializeBoard=function(){for(var e=0;e<8;e++){this.boardData[e]=[],this.buttons[e]=[];for(var t=0;t<8;t++)this.boardData[e][t]=y.None,this.buttons[e][t]=this.board.children[e].children[t].getComponent(C),this.buttons[e][t].initData(e,t,y.None,this)}this.setPiece(3,3,y.White),this.setPiece(4,4,y.White),this.setPiece(3,4,y.Black),this.setPiece(4,3,y.Black);for(var i=0;i<62;i++){c(this.whiteItem).setParent(this.left),c(this.blackItem).setParent(this.right)}},n.handlePieceClick=function(e,t){var i=this;if(!v.gameOver){var r=v.currTurn;if(this.boardData[e][t]===y.None){var a=this.getFlippedPieces(e,t,r);if(a.length>0&&(this.setPiece(e,t,r),a.forEach((function(e){i.setPiece(e.row,e.col,r)})),this.changeTurn(),!this.hasValidMoves()&&(this.changeTurn(),!this.hasValidMoves())))return v.gameOver=!0,void this.showGameOver()}}},n.updateChessNum=function(){for(var e=0,t=0,i=0;i<8;i++)for(var r=0;r<8;r++)this.boardData[i][r]===y.Black?e++:this.boardData[i][r]===y.White&&t++;v.blackChess=e,v.whiteChess=t,this.myChess.string="x"+v.blackChess,this.aiChess.string="x"+v.whiteChess},n.changeTurn=function(){var e=this;if(v.currTurn=3-v.currTurn,this.updateButtons(),this.updateChessNum(),v.currTurn==y.White&&this.hasValidMoves()){var t=v.getRandomInt(3,6);this.scheduleOnce((function(){var t=e.getGreedyAIStep(),i=t[0],r=t[1];e.handlePieceClick(i,r)}),t)}},n.getValidMoves=function(){for(var e=[],t=0;t<8;t++)for(var i=0;i<8;i++)if(this.boardData[t][i]===y.None)for(var r=-1;r<=1;r++)for(var a=-1;a<=1;a++)if(0!==r||0!==a){for(var n=t+r,o=i+a,s=0;n>=0&&n<8&&o>=0&&o<8&&this.boardData[n][o]!==v.currTurn&&this.boardData[n][o]!==y.None;)n+=r,o+=a,s++;if(n>=0&&n<8&&o>=0&&o<8&&this.boardData[n][o]===v.currTurn&&s>0){e.push([t,i]);break}}return e},n.updateButtons=function(){if(v.currTurn==y.Black)for(var e=this.getValidMoves(),t=0;t<e.length;t++){var i=e[t],r=i[0],a=i[1],n=this.buttons[r][a],o=this.getFlippedPieces(r,a,v.currTurn);n.showCanFlipCount(o.length)}else for(var s=0;s<8;s++)for(var l=0;l<8;l++)this.buttons[s][l].showCanFlipCount(0)},n.setPiece=function(e,t,i){var r=!1;if(this.boardData[e][t]!=y.None){r=!0;var a=this.board.children[e].children[t].children[1];if(f(a).to(.3,{scale:new d(0,1,1)}).call((function(){a.removeFromParent()})).start(),this.boardData[e][t]==y.White)c(this.whiteItem).setParent(this.left);else if(this.boardData[e][t]==y.Black){c(this.blackItem).setParent(this.right)}}this.boardData[e][t]=i,this.buttons[e][t].initData(e,t,i,this);var n=c(this.piecePrefab);n.getComponent(g).initData(e,t,i),r?(n.scale=new d(0,1,1),n.setParent(this.board.children[e].children[t]),f(n).delay(.2).to(.3,{scale:new d(1,1,1)}).start()):n.setParent(this.board.children[e].children[t]),i==y.White?this.left.removeChild(this.left.children[0]):i==y.Black&&this.right.removeChild(this.right.children[0])},n.getFlippedPieces=function(e,t,i){for(var r=[],a=0,n=[b(-1,-1),b(-1,0),b(-1,1),b(0,-1),b(0,1),b(1,-1),b(1,0),b(1,1)];a<n.length;a++){for(var o=n[a],s=[],l=e+o.y,h=t+o.x;l>=0&&l<8&&h>=0&&h<8&&this.boardData[l][h]===3-i;)s.push({row:l,col:h}),l+=o.y,h+=o.x;l>=0&&l<8&&h>=0&&h<8&&this.boardData[l][h]===i&&r.push.apply(r,s)}return r},n.hasValidMoves=function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++)if(this.boardData[e][t]===y.None&&this.getFlippedPieces(e,t,v.currTurn).length>0)return!0;return!1},n.showGameOver=function(){v.gameOver=!0;for(var e=0,t=0,i=0;i<8;i++)for(var r=0;r<8;r++)this.boardData[i][r]===y.Black?e++:this.boardData[i][r]===y.White&&t++;var a="";a=e>t?"BLACK WINS":t>e?"WHITE WINS":"DRAW",this.myChess2.string="x"+e,this.aiChess2.string="x"+t,this.mytime2.string=v.formatTime(v.MyTime),this.aitime2.string=v.formatTime(v.AITime),this.message.string=a,this.endNode.active=!0,m(a,e,t),this.unscheduleAllCallbacks()},n.getGreedyAIStep=function(){for(var e=[],t=-1,i=this.getValidMoves(),r=0;r<i.length;r++){var a=i[r],n=a[0],o=a[1],s=this.getFlippedPieces(n,o,v.currTurn);s.length>t&&(e=[n,o],t=s.length)}return e},t}(p)).prototype,"piecePrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(S.prototype,"whiteItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"blackItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(S.prototype,"board",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(S.prototype,"left",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(S.prototype,"right",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(S.prototype,"startNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(S.prototype,"endNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(S.prototype,"mytime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(S.prototype,"aitime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(S.prototype,"myChess",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(S.prototype,"aiChess",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(S.prototype,"mytime2",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(S.prototype,"aitime2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(S.prototype,"myChess2",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(S.prototype,"aiChess2",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(S.prototype,"message",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["cc"],(function(t){"use strict";var e,i;return{setters:[function(t){e=t.cclegacy,i=t.sys}],execute:function(){var o;t("PieceColor",void 0),e._RF.push({},"46359XX+G9F9ppMC5WwZgUp","Global",void 0),function(t){t[t.None=0]="None",t[t.Black=1]="Black",t[t.White=2]="White"}(o||(o=t("PieceColor",{})));var r=t("default",function(){function t(){}return t.clearData=function(){this.currTurn=o.Black,this.blackChess=0,this.whiteChess=0,this.gameOver=!1,this.AITime=0,this.MyTime=0},t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t)+t)},t.formatTime=function(t){var e=Math.floor(t/60),i=t%60;return(e<10?"0":"")+e+":"+(i<10?"0":"")+i},t.setLocalStorage=function(t,e){i.localStorage.setItem(t,e)},t}());r.currTurn=o.Black,r.blackChess=0,r.whiteChess=0,r.gameOver=!1,r.MyTime=0,r.AITime=0,e._RF.pop()}}}));

System.register("chunks:///_virtual/InstallReferrer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AHotUpdate.ts"],(function(e){"use strict";var t,r,n,o,a,i,l,s,c,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,l=e.ProgressBar,s=e.sys,c=e.director,u=e.assetManager,p=e.Component},function(e){f=e.HotUpdate}],execute:function(){var g,h,d,y,m,R,b,v,S,A;a._RF.push({},"39ffbAGpepNw6cNxSVbWr+9","InstallReferrer",void 0);var C=i.ccclass,I=i.property;e("InstallReferrer",(g=C("InstallReferrer"),h=I(l),g((m=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"loadingBar",m,o(t)),n(t,"retryCount",R,o(t)),n(t,"maxRetryCount",b,o(t)),n(t,"installReferrerKey",v,o(t)),n(t,"storageTenantKey",S,o(t)),n(t,"openABMode",A,o(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.openABMode?s.isNative&&s.os===s.OS.ANDROID?this.checkLocalStorage():this.startCheckVersion():this.enterB()},a.enterA=function(e){c.loadScene("chess")},a.enterB=function(){var e=this;u.loadBundle("Amlang",(function(t,r){if(t)return console.log("加载 bundle 出错:",t),void e.enterA();c.preloadScene("game",(function(t,r,n){var o=t/r;e.loadingBar.progress=o}),(function(e){e?console.error("Failed to preload scene:",e):r.loadScene("game",(function(e,t){if(e)console.error("Failed to load scene:",e);else{console.log("Scene loaded successfully!");var r=t.scene.name;c.loadScene(r)}}))}))}))},a.startCheckVersion=function(){if(s.isNative){var e=this.node.getComponent(f);e&&e.startCheckUpdate(this.enterB,this.enterA)}else this.enterB()},a.checkLocalStorage=function(){var e=s.localStorage.getItem(this.installReferrerKey);e?(console.log("installReferrerURL",e),this.parseAndSaveInstallReferrer(e)):this.retryCount<this.maxRetryCount?(this.retryCount++,this.scheduleOnce(this.checkLocalStorage.bind(this),1)):(console.log("Maximum retry count reached. Stopping checkLocalStorage."),this.enterA())},a.parseAndSaveInstallReferrer=function(e){var t=this.parseQueryParams(e),r=t.utm_content,n=t.utm_campaign;console.log("installReferrerPlugin ==> Campaign & Content = ",n,r),"tenant"===n&&r?(s.localStorage.setItem(this.storageTenantKey,r),console.log("installReferrerPlugin ==> writing on storage,开始热更新"),this.startCheckVersion()):this.enterA()},a.parseQueryParams=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return t},a.testUnit=function(){this.parseAndSaveInstallReferrer("utm_source=google-play&utm_content=1111&utm_campaign=tenant"),console.log("test parseAndSaveInstallReferrer. Storage Tenant = ",s.localStorage.getItem(this.storageTenantKey))},t}(p)).prototype,"loadingBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(y.prototype,"retryCount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(y.prototype,"maxRetryCount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),v=t(y.prototype,"installReferrerKey",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"InstallReferrerURL"}}),S=t(y.prototype,"storageTenantKey",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"installReferrerTenant"}}),A=t(y.prototype,"openABMode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e.director}],execute:function(){e({init:r,t:function(e){var n=window;if(!n.languages)return e;for(var t=e.split("."),r=n.languages[a],u=0;u<t.length;u++)if(!(r=r[t[u]]))return"";return r||""},updateSceneRenderers:u}),n._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var a=e("_language","zh");e("ready",!1);function r(n){e("ready",!0),a=e("_language",n)}function u(){for(var e=t.getScene().children,n=[],a=0;a<e.length;++a){var r=e[a].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,r)}for(var u=0;u<n.length;++u){var i=n[u];i.node.active&&i.updateLabel()}for(var o=[],g=0;g<e.length;++g){var c=e[g].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var l=0;l<o.length;++l){var p=o[l];p.node.active&&p.updateSprite()}}window._languageData={get language(){return a},init:function(e){r(e)},updateSceneRenderers:function(){u()}},n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,o,a,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Component},function(e){s=e.ready,u=e.init,p=e.t}],execute:function(){var y,d,b,f,h,L;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var g=l.ccclass,v=l.property,k=l.executeInEditMode;e("LocalizedLabel",(y=g("LocalizedLabel"),d=v({visible:!1}),b=v({displayName:"Key",visible:!0}),y(f=k((L=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).label=null,r(t,"key",L,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){s||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=p(this.key))},o(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(c)).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"_key",[b],Object.getOwnPropertyDescriptor(h.prototype,"_key"),h.prototype),f=h))||f)||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Board.ts","./Chess.ts","./ChessBoard.ts","./Global.ts","./AHotUpdate.ts","./InstallReferrer.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedSprite.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});